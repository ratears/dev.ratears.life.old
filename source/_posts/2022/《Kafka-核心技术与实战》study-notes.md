---
title: 《Kafka 核心技术与实战》study notes
author: ratears
categories:
	- [MQ,Kafka]
tags:
  - Kafka
date: 2022-11-26 22:00:57
updated: 2022-11-26 22:00:57
---



# 开篇词 (1讲)

## 开篇词 | 为什么要学习Kafka？

- 当下互联网行业最火的技术当属 ABC 了
  - AI 人工智能
  - BigData 大数据
  - Cloud 云计算云平台
- 对于数据密集型应用来说，如何应对数据量激增、数据复杂度增加以及数据变化速率变快，是彰显大数据工程师、架构师功力的最有效表征
  - Kafka 在帮助应对这些问题方面能起到非常好的效果（Kafka 能够有效隔离上下游业务，将上游突增的流量缓存起来，以平滑的方式传导到下游子系统中，避免了流量的不规则冲击）

- Kafka 有着非常广阔的应用场景
  - 目前 Apache Kafka 被认为是整个消息引擎领域的执牛耳者
  - 从学习技术的角度而言，Kafka 也是很有亮点的（我们仅需要学习一套框架就能在实际业务系统中实现消息引擎应用、应用程序集成、分布式存储构建，甚至是流处理应用的开发与部署）
  - Kafka 无论是作为消息引擎还是实时流处理平台，都能在大数据工程领域发挥重要的作用

<br>

### 学透 Kafka 推荐路径

- 软件开发工程师

1. 根据你掌握的编程语言去寻找对应的 Kafka 客户端
2. 去官网上学习一下代码示例（如果能够正确编译和运行这些样例，就能轻松地驾驭客户端了）
3. 尝试修改样例代码尝试去理解并使用其他的 API（观测修改的结果）
4. 编写一个小型项目来验证下学习成果，然后就是改善和提升客户端的可靠性和性能了
5. 熟读一遍 Kafka 官网文档，确保理解了那些可能影响可靠性和性能的参数
6. 学习 Kafka 的高级功能（比如流处理应用开发。流处理 API 不仅能够生产和消费消息，还能执行高级的流式处理操作，比如时间窗口聚合、流处理连接等）



- 系统管理员或运维工程师

> 如果你是系统管理员或运维工程师，那么相应的学习目标应该是学习搭建及管理 Kafka 线上环境。如何根据实际业务需求评估、搭建生产线上环境将是你主要的学习目标。另外对生产环境的监控也是重中之重的工作，Kafka 提供了超多的 JMX 监控指标，你可以选择任意你熟知的框架进行监控。有了监控数据，作为系统运维管理员的你，势必要观测真实业务负载下的 Kafka 集群表现。之后如何利用已有的监控指标来找出系统瓶颈，然后提升整个系统的吞吐量，这也是最能体现你工作价值的地方

<br>

### 专栏思维导图

<img src="https://cdn.staticaly.com/gh/ratears/image-hosting@main/blog-img-bed/image.26rhfqn0svcw.webp" width="100%">

<br>

（1）Kafka 入门

- 介绍消息引擎这类系统大致的原理和用途，以及作为优秀消息引擎代表的 Kafka 在这方面的表现

（2）Kafka 的基本使用

- 重点探讨 Kafka 如何用于生产环境，特别是线上环境方案的制定

（3）客户端详解

- 学习 Kafka 客户端的方方面面，既有生产者的实操讲解也有消费者的原理剖析

（4）Kafka 原理介绍

- 着重介绍 Kafka 最核心的设计原理，包括 Controller 的设计机制、请求处理全流程解析等

（5）Kafka 运维与监控

- 获得高效运维 Kafka 集群以及有效监控 Kafka 的实战经验

（6）高级 Kafka 应用

- Kafka 流处理组件 Kafka Streams 的实战应用

<br>

<br>

<br>

# Kafka入门 (5讲)

## 01 | 消息引擎系统ABC

- **Apache Kafka 是一款开源的消息引擎系统**
- 消息引擎系统是一组规范。企业利用这组规范在不同系统之间传递语义准确的消息，实现松耦合的异步式数据传递
- Kafka使用纯二进制字节序列传递消息，消息也是有结构的



### 消息引擎传输消息模型

- **点对点模型**：一对一发送or接收消息
- **发布 / 订阅模型**：它有一个主题（Topic）的概念（可以理解成逻辑语义相近的消息容器）。发送方也称为发布者（Publisher），接收方称为订阅者（Subscriber）。和点对点模型不同的是，这个模型可能存在多个发布者向相同的主题发送消息，而订阅者也可能存在多个



- JMS：JMS 是 Java Message Service，它也是支持上面这两种消息引擎模型的。严格来说它并非传输协议而仅仅是一组 API 罢了



### 为什么要使用消息引擎

- **削峰填谷**

> ​	所谓的“削峰填谷”就是指缓冲上下游瞬时突发流量，使其更平滑。特别是对于那种发送能力很强的上游系统，如果没有消息引擎的保护，“脆弱”的下游系统可能会直接被压垮导致全链路服务“雪崩”。但是，一旦有了消息引擎，它能够有效地对抗上游的流量冲击，真正做到将上游的“峰”填满到“谷”中，避免了流量的震荡。消息引擎系统的另一大好处在于发送方和接收方的松耦合，这也在一定程度上简化了应用的开发，减少了系统间不必要的交互。

- 当引入了 Kafka 之后。上游订单服务不再直接与下游子服务进行交互。当新订单生成后它仅仅是向 Kafka Broker 发送一条订单消息即可。类似地，下游的各个子服务订阅 Kafka 中的对应主题，并实时从该主题的各自分区（Partition）中获取到订单消息进行处理，从而实现了上游订单服务与下游订单处理服务的解耦。这样当出现秒杀业务时，Kafka 能够将瞬时增加的订单流量全部以消息形式保存在对应的主题中，既不影响上游服务的 TPS，同时也给下游子服务留出了充足的时间去消费它们。这就是 Kafka 这类消息引擎系统的最大意义所在。



## 









<br>

<br>

<br>

# 学习备注

> 1

```html
&emsp;&emsp;
```

<br>

<br>

<br>

<img src="" width="60%">

<br>